import{A as gt}from"./domHelpers-fLsed4VC.js";var S=function(){return S=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(t[p]=r[p])}return t},S.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),n}));var vt=typeof document<"u"&&!!document.documentMode,at;function yt(){return at||(at=document.createElement("div").style)}var ht=["webkit","moz","ms"],H={};function ut(e){if(H[e])return H[e];var t=yt();if(e in t)return H[e]=e;for(var r=e[0].toUpperCase()+e.slice(1),n=ht.length;n--;){var i="".concat(ht[n]).concat(r);if(i in t)return H[e]=i}}function Q(e,t){return parseFloat(t[ut(e)])||0}function J(e,t,r){r===void 0&&(r=window.getComputedStyle(e));var n=t==="border"?"Width":"";return{left:Q("".concat(t,"Left").concat(n),r),right:Q("".concat(t,"Right").concat(n),r),top:Q("".concat(t,"Top").concat(n),r),bottom:Q("".concat(t,"Bottom").concat(n),r)}}function F(e,t,r){e.style[ut(t)]=r}function wt(e,t){var r=ut("transform");F(e,"transition","".concat(r," ").concat(t.duration,"ms ").concat(t.easing))}function bt(e,t,r){var n=t.x,i=t.y,p=t.scale,y=t.isSVG;if(F(e,"transform","scale(".concat(p,") translate(").concat(n,"px, ").concat(i,"px)")),y&&vt){var M=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",M)}}function ot(e){var t=e.parentNode,r=window.getComputedStyle(e),n=window.getComputedStyle(t),i=e.getBoundingClientRect(),p=t.getBoundingClientRect();return{elem:{style:r,width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right,margin:J(e,"margin",r),border:J(e,"border",r)},parent:{style:n,width:p.width,height:p.height,top:p.top,bottom:p.bottom,left:p.left,right:p.right,padding:J(t,"padding",n),border:J(t,"border",n)}}}var U={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?U={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(U={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function st(e,t,r,n){U[e].split(" ").forEach(function(i){t.addEventListener(i,r,n)})}function it(e,t,r){U[e].split(" ").forEach(function(n){t.removeEventListener(n,r)})}function mt(e,t){for(var r=e.length;r--;)if(e[r].pointerId===t.pointerId)return r;return-1}function lt(e,t){var r;if(t.touches){r=0;for(var n=0,i=t.touches;n<i.length;n++){var p=i[n];p.pointerId=r++,lt(e,p)}return}r=mt(e,t),r>-1&&e.splice(r,1),e.push(t)}function xt(e,t){if(t.touches){for(;e.length;)e.pop();return}var r=mt(e,t);r>-1&&e.splice(r,1)}function dt(e){e=e.slice(0);for(var t=e.pop(),r;r=e.pop();)t={clientX:(r.clientX-t.clientX)/2+t.clientX,clientY:(r.clientY-t.clientY)/2+t.clientY};return t}function ct(e){if(e.length<2)return 0;var t=e[0],r=e[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-t.clientX),2)+Math.pow(Math.abs(r.clientY-t.clientY),2))}function Mt(e){for(var t=e;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function Ct(e){return(e.getAttribute("class")||"").trim()}function Et(e,t){return e.nodeType===1&&" ".concat(Ct(e)," ").indexOf(" ".concat(t," "))>-1}function Pt(e,t){for(var r=e;r!=null;r=r.parentNode)if(Et(r,t.excludeClass)||t.exclude.indexOf(r)>-1)return!0;return!1}var St=/^http:[\w\.\/]+svg$/;function qt(e){return St.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function It(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var pt={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:bt,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function At(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!Mt(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=S(S({},pt),t);var r=qt(e),n=e.parentNode;n.style.overflow=t.overflow,n.style.userSelect="none",n.style.touchAction=t.touchAction,(t.canvas?n:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,F(e,"transformOrigin",typeof t.origin=="string"?t.origin:r?"0 0":"50% 50%");function i(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",F(e,"transformOrigin","")}function p(a){a===void 0&&(a={});for(var l in a)a.hasOwnProperty(l)&&(t[l]=a[l]);(a.hasOwnProperty("cursor")||a.hasOwnProperty("canvas"))&&(n.style.cursor=e.style.cursor="",(t.canvas?n:e).style.cursor=t.cursor),a.hasOwnProperty("overflow")&&(n.style.overflow=a.overflow),a.hasOwnProperty("touchAction")&&(n.style.touchAction=a.touchAction,e.style.touchAction=a.touchAction)}var y=0,M=0,w=1,X=!1;o(t.startScale,{animate:!1,force:!0}),setTimeout(function(){_(t.startX,t.startY,{animate:!1,force:!0})});function Y(a,l,d){if(!d.silent){var g=new CustomEvent(a,{detail:l});e.dispatchEvent(g)}}function j(a,l,d){var g={x:y,y:M,scale:w,isSVG:r,originalEvent:d};return requestAnimationFrame(function(){typeof l.animate=="boolean"&&(l.animate?wt(e,l):F(e,"transition","none")),l.setTransform(e,g,l),Y(a,g,l),Y("panzoomchange",g,l)}),g}function W(a,l,d,g){var c=S(S({},t),g),v={x:y,y:M,opts:c};if(!c.force&&(c.disablePan||c.panOnlyWhenZoomed&&w===c.startScale))return v;if(a=parseFloat(a),l=parseFloat(l),c.disableXAxis||(v.x=(c.relative?y:0)+a),c.disableYAxis||(v.y=(c.relative?M:0)+l),c.contain){var f=ot(e),B=f.elem.width/w,T=f.elem.height/w,$=B*d,V=T*d,L=($-B)/2,R=(V-T)/2;if(c.contain==="inside"){var tt=(-f.elem.margin.left-f.parent.padding.left+L)/d,et=(f.parent.width-$-f.parent.padding.left-f.elem.margin.left-f.parent.border.left-f.parent.border.right+L)/d;v.x=Math.max(Math.min(v.x,et),tt);var rt=(-f.elem.margin.top-f.parent.padding.top+R)/d,nt=(f.parent.height-V-f.parent.padding.top-f.elem.margin.top-f.parent.border.top-f.parent.border.bottom+R)/d;v.y=Math.max(Math.min(v.y,nt),rt)}else if(c.contain==="outside"){var tt=(-($-f.parent.width)-f.parent.padding.left-f.parent.border.left-f.parent.border.right+L)/d,et=(L-f.parent.padding.left)/d;v.x=Math.max(Math.min(v.x,et),tt);var rt=(-(V-f.parent.height)-f.parent.padding.top-f.parent.border.top-f.parent.border.bottom+R)/d,nt=(R-f.parent.padding.top)/d;v.y=Math.max(Math.min(v.y,nt),rt)}}return c.roundPixels&&(v.x=Math.round(v.x),v.y=Math.round(v.y)),v}function G(a,l){var d=S(S({},t),l),g={scale:w,opts:d};if(!d.force&&d.disableZoom)return g;var c=t.minScale,v=t.maxScale;if(d.contain){var f=ot(e),B=f.elem.width/w,T=f.elem.height/w;if(B>1&&T>1){var $=f.parent.width-f.parent.border.left-f.parent.border.right,V=f.parent.height-f.parent.border.top-f.parent.border.bottom,L=$/B,R=V/T;t.contain==="inside"?v=Math.min(v,L,R):t.contain==="outside"&&(c=Math.max(c,L,R))}}return g.scale=Math.min(Math.max(a,c),v),g}function _(a,l,d,g){var c=W(a,l,w,d);return y!==c.x||M!==c.y?(y=c.x,M=c.y,j("panzoompan",c.opts,g)):{x:y,y:M,scale:w,isSVG:r,originalEvent:g}}function o(a,l,d){var g=G(a,l),c=g.opts;if(!(!c.force&&c.disableZoom)){a=g.scale;var v=y,f=M;if(c.focal){var B=c.focal;v=(B.x/a-B.x/w+y*a)/a,f=(B.y/a-B.y/w+M*a)/a}var T=W(v,f,a,{relative:!1,force:!0});return y=T.x,M=T.y,w=a,j("panzoomzoom",c,d)}}function s(a,l){var d=S(S(S({},t),{animate:!0}),l);return o(w*Math.exp((a?1:-1)*d.step),d)}function u(a){return s(!0,a)}function h(a){return s(!1,a)}function m(a,l,d,g){var c=ot(e),v={width:c.parent.width-c.parent.padding.left-c.parent.padding.right-c.parent.border.left-c.parent.border.right,height:c.parent.height-c.parent.padding.top-c.parent.padding.bottom-c.parent.border.top-c.parent.border.bottom},f=l.clientX-c.parent.left-c.parent.padding.left-c.parent.border.left-c.elem.margin.left,B=l.clientY-c.parent.top-c.parent.padding.top-c.parent.border.top-c.elem.margin.top;r||(f-=c.elem.width/w/2,B-=c.elem.height/w/2);var T={x:f/v.width*(v.width*a),y:B/v.height*(v.height*a)};return o(a,S(S({},d),{animate:!1,focal:T}),g)}function q(a,l){a.preventDefault();var d=S(S(S({},t),l),{animate:!1}),g=a.deltaY===0&&a.deltaX?a.deltaX:a.deltaY,c=g<0?1:-1,v=G(w*Math.exp(c*d.step/3),d).scale;return m(v,a,d,a)}function P(a){var l=S(S(S({},t),{animate:!0,force:!0}),a);w=G(l.startScale,l).scale;var d=W(l.startX,l.startY,w,l);return y=d.x,M=d.y,j("panzoomreset",l)}var O,A,I,C,E,b,x=[];function z(a){if(!Pt(a.target,t)){lt(x,a),X=!0,t.handleStartEvent(a),O=y,A=M,Y("panzoomstart",{x:y,y:M,scale:w,isSVG:r,originalEvent:a},t);var l=dt(x);I=l.clientX,C=l.clientY,E=w,b=ct(x)}}function N(a){if(!(!X||O===void 0||A===void 0||I===void 0||C===void 0)){lt(x,a);var l=dt(x),d=x.length>1,g=w;if(d){b===0&&(b=ct(x));var c=ct(x)-b;g=G(c*t.step/80+E).scale,m(g,l,{animate:!1},a)}(!d||t.pinchAndPan)&&_(O+(l.clientX-I)/g,A+(l.clientY-C)/g,{animate:!1},a)}}function D(a){x.length===1&&Y("panzoomend",{x:y,y:M,scale:w,isSVG:r,originalEvent:a},t),xt(x,a),X&&(X=!1,O=A=I=C=void 0)}var k=!1;function Z(){k||(k=!0,st("down",t.canvas?n:e,z),st("move",document,N,{passive:!0}),st("up",document,D,{passive:!0}))}function K(){k=!1,it("down",t.canvas?n:e,z),it("move",document,N),it("up",document,D)}return t.noBind||Z(),{bind:Z,destroy:K,eventNames:U,getPan:function(){return{x:y,y:M}},getScale:function(){return w},getOptions:function(){return It(t)},handleDown:z,handleMove:N,handleUp:D,pan:_,reset:P,resetStyle:i,setOptions:p,setStyle:function(a,l){return F(e,a,l)},zoom:o,zoomIn:u,zoomOut:h,zoomToPoint:m,zoomWithWheel:q}}At.defaultOptions=pt;class Ot{constructor(t){this.sleep=r=>new Promise(n=>setTimeout(n,r)),this.container=t,this.emptyBoxTime=null,this.processing=!1,this.queue=[],this.items=[],this.breakpoints=this.parseDataCols(this.container.dataset.cols||""),this.currentColCount=0,this.setupColumns(),window.addEventListener("resize",()=>this.refreshColumns())}parseDataCols(t){const r={sm:null,md:null,lg:null,xl:null};t.split(" ").forEach(i=>{const[p,y]=i.split(":");p&&y&&(r[p]=parseInt(y))});const n=["sm","md","lg","xl"];for(let i=0;i<n.length;i++)r[n[i]]===null&&(r[n[i]]=i>0?r[n[i-1]]:1);return r}getColumnCount(){const t=window.innerWidth;switch(!0){case t>=1200:return this.breakpoints.xl;case t>=992:return this.breakpoints.lg;case t>=768:return this.breakpoints.md}return this.breakpoints.sm}setupColumns(){this.container.querySelectorAll(".flow").forEach(n=>n.remove()),this.currentColCount=this.getColumnCount();const t=(100/this.currentColCount).toFixed(6)+"%",r=document.createDocumentFragment();for(let n=0;n<this.currentColCount;n++){const i=document.createElement("div");i.className="col flow p-1",i.style.width=t,r.appendChild(i)}this.container.prepend(r)}refreshColumns(t=!1){const r=this.getColumnCount();if(t||r!==this.currentColCount){const n=[...this.items];this.clear(),this.setupColumns(),n.forEach(i=>this.addItem(i))}this.toggleMessageBox()}queueItem(t){this.queue.push(t),this.processQueue()}async processQueue(){if(!this.processing){for(this.processing=!0;this.queue.length>0;){const t=this.queue.shift();this.addItem(t),await this.sleep(100)}this.container.dispatchEvent(new CustomEvent("grid.complete",{})),this.processing=!1}}addItem(t){this.getShortestColumn().appendChild(t),this.items.push(t),this.container.dispatchEvent(new CustomEvent("grid.refresh",{detail:this.items})),requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.classList.add("show")})}),this.toggleMessageBox()}removeItem(t){t.classList.remove("show"),setTimeout(()=>{t.parentElement&&t.parentElement.removeChild(t),this.items=this.items.filter(r=>r!==t),this.refreshColumns(!0)},300)}getShortestColumn(){return Array.from(this.container.querySelectorAll(".flow")).reduce((r,n)=>n.scrollHeight<r.scrollHeight?n:r)}clear(){this.items=[],this.queue=[],this.container.querySelectorAll(".flow").forEach(r=>r.innerHTML=""),this.toggleMessageBox()}toggleMessageBox(){const t=this.container.querySelector(".empty-grid");t&&(this.items.length===0&&!this.emptyBoxTimer?(t.classList.remove("d-none"),this.emptyBoxTimer=setTimeout(()=>{t.classList.add("show")},400)):this.items.length!==0&&(t.classList.remove("show"),t.offsetHeight,t.classList.add("d-none"),clearTimeout(this.emptyBoxTimer),this.emptyBoxTimer=null))}}const ft=(function(e){const t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],r=o=>{let s=0;for(let u=0;u<o.length;u++){const h=o[u],m=t.indexOf(h);s=s*83+m}return s},n=(o,s)=>{var u="";for(let h=1;h<=s;h++){let m=Math.floor(o)/Math.pow(83,s-h)%83;u+=t[Math.floor(m)]}return u},i=o=>{let s=o/255;return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)},p=o=>{let s=Math.max(0,Math.min(1,o));return s<=.0031308?Math.round(s*12.92*255+.5):Math.round((1.055*Math.pow(s,.4166666666666667)-.055)*255+.5)},y=o=>o<0?-1:1,M=(o,s)=>y(o)*Math.pow(Math.abs(o),s),w=o=>{if(!o||o.length<6)throw new Error("The blurhash string must be at least 6 characters");const s=r(o[0]),u=Math.floor(s/9)+1,h=s%9+1;if(o.length!==4+2*h*u)throw new Error(`blurhash length mismatch: length is ${o.length} but it should be ${4+2*h*u}`)},X=o=>{const s=o>>16,u=o>>8&255,h=o&255;return[i(s),i(u),i(h)]},Y=(o,s)=>{const u=Math.floor(o/361),h=Math.floor(o/19)%19,m=o%19;return[M((u-9)/9,2)*s,M((h-9)/9,2)*s,M((m-9)/9,2)*s]},W=(o,s,u,h)=>{let m=0,q=0,P=0;const O=s*4;for(let I=0;I<s;I++)for(let C=0;C<u;C++){const E=h(I,C);m+=E*i(o[4*I+0+C*O]),q+=E*i(o[4*I+1+C*O]),P+=E*i(o[4*I+2+C*O])}let A=1/(s*u);return[m*A,q*A,P*A]},G=o=>{const s=p(o[0]),u=p(o[1]),h=p(o[2]);return(s<<16)+(u<<8)+h},_=(o,s)=>{let u=Math.floor(Math.max(0,Math.min(18,Math.floor(M(o[0]/s,.5)*9+9.5)))),h=Math.floor(Math.max(0,Math.min(18,Math.floor(M(o[1]/s,.5)*9+9.5)))),m=Math.floor(Math.max(0,Math.min(18,Math.floor(M(o[2]/s,.5)*9+9.5))));return u*19*19+h*19+m};return e.decodePromise=(o,s,u,h=1)=>new Promise((m,q)=>{m(e.decode(o,s,u,h))}),e.decode=(o,s,u,h=1)=>{w(o),h=h|1;const m=r(o[0]),q=Math.floor(m/9)+1,P=m%9+1,A=(r(o[1])+1)/166,I=new Array(P*q);for(let b=0;b<I.length;b++)if(b===0){const x=r(o.substring(2,6));I[b]=X(x)}else{const x=r(o.substring(4+b*2,6+b*2));I[b]=Y(x,A*h)}const C=s*4,E=new Uint8ClampedArray(C*u);for(let b=0;b<u;b++)for(let x=0;x<s;x++){let z=0,N=0,D=0;for(let a=0;a<q;a++)for(let l=0;l<P;l++){const d=Math.cos(Math.PI*x*l/s)*Math.cos(Math.PI*b*a/u);let g=I[l+a*P];z+=g[0]*d,N+=g[1]*d,D+=g[2]*d}let k=p(z),Z=p(N),K=p(D);E[4*x+0+b*C]=k,E[4*x+1+b*C]=Z,E[4*x+2+b*C]=K,E[4*x+3+b*C]=255}return E},e.encodePromise=(o,s,u,h,m)=>new Promise((q,P)=>{q(e.encode(o,s,u,h,m))}),e.encode=(o,s,u,h,m)=>{if(h<1||h>9||m<1||m>9)throw new Error("BlurHash must have between 1 and 9 components");if(s*u*4!==o.length)throw new Error("Width and height must match the pixels array");let q=[];for(let E=0;E<m;E++)for(let b=0;b<h;b++){const x=b==0&&E==0?1:2,z=W(o,s,u,(N,D)=>x*Math.cos(Math.PI*b*N/s)*Math.cos(Math.PI*E*D/u));q.push(z)}const P=q[0],O=q.slice(1);let A="",I=h-1+(m-1)*9;A+=n(I,1);let C;if(O.length>0){let E=Math.max(...O.map(x=>Math.max(...x))),b=Math.floor(Math.max(0,Math.min(82,Math.floor(E*166-.5))));C=(b+1)/166,A+=n(b,1)}else C=1,A+=n(0,1);return A+=n(G(P),4),O.forEach(E=>{A+=n(_(E,C),2)}),A},e.getImageData=o=>{const s=o.width,u=o.height,h=document.createElement("canvas"),m=h.getContext("2d");return h.width=s,h.height=u,m.width=s,m.height=u,m.drawImage(o,0,0),m.getImageData(0,0,s,u).data},e.drawImageDataOnNewCanvas=(o,s,u)=>{const h=document.createElement("canvas"),m=h.getContext("2d");return h.width=s,h.height=u,m.width=s,m.height=u,m.putImageData(new ImageData(o,s,u),0,0),h},e.getImageDataAsImageWithOnloadPromise=(o,s,u)=>new Promise((h,m)=>{e.getImageDataAsImage(o,s,u,(q,P)=>{h(P)})}),e.getImageDataAsImage=(o,s,u,h)=>{const q=e.drawImageDataOnNewCanvas(o,s,u).toDataURL(),P=new Image(s,u);return P.onload=O=>h(O,P),P.width=s,P.height=u,P.src=q,P},e})({});class Tt{constructor(t,r="grid"){this.sleep=n=>new Promise(i=>setTimeout(i,n)),this.container=typeof r=="string"?document.getElementById(r):r,this.manager=t,this.rendering=!1,this.observer=!0,this.items=[],this.masonry=new Ot(this.container),this.container.addEventListener("grid.complete",()=>{this.observer&&this.setupObserver()})}add(t){const r=Array.isArray(t)?t:[t];r.forEach(n=>{this._append(n)}),this.items=this.items.concat(r)}async render(){if(!this.rendering){for(this.rendering=!0;this.items.length;)this._append(this.items.shift());this.rendering=!1}}_append(t){this.masonry.queueItem(t),this.container.dispatchEvent(new CustomEvent("grid.queued_item",{detail:{item:t}}))}remove(t){this.masonry.removeItem(t)}clear(){this.masonry.clear(),this.items=[]}setupObserver(){const t=this.container.querySelectorAll(".grid-item");if(!t.length)return;new IntersectionObserver(async(n,i)=>{for(const p of n)p.isIntersecting&&!gt.isLoading()&&(i.disconnect(),await this.manager.showMore())},{rootMargin:"200px"}).observe(t[t.length-1])}}const zt={folder(e){const r=document.querySelector("#card-folder").content.firstElementChild.cloneNode(!0),n=r.querySelector(".folder-thumb");n.src=`folders/${e.id}/thumbnail`;const i=r.querySelector(".folder-name");return i.textContent=e.name,i.title=e.name,r},file(e){const r=document.querySelector("#card-file").content.firstElementChild.cloneNode(!0);r.href=e.path_full,r.dataset.id=e.id;const n=r.querySelector(".file-body");n.style.backgroundImage=`url(${e.path_thumb})`,n.style.backgroundSize="cover";const i=r.querySelector(".file-name");return i.textContent=e.filename,i.title=e.filename,r},async album(e){const r=document.querySelector("#card-album").content.firstElementChild.cloneNode(!0);if(r.href=route("albums.show",{id:e.id}),r.dataset.id=e.id,e.cover){const y=await this._createBlurHash(e.cover);y.className="d-block position-absolute object-fit-cover w-100 h-100",r.querySelector(".album-blurhash").replaceWith(y)}else r.querySelector(".album-blurhash").remove();const n=r.querySelector(".album-thumb");n.src=`albums/${e.id}/cover`;const i=r.querySelector(".album-photo-count");i.textContent=e.photos;const p=r.querySelector(".album-title");return p.textContent=e.display_name,r},async photo(e){const r=document.querySelector("#card-photo").content.firstElementChild.cloneNode(!0),n=Math.min(250/e.width,1),i=Math.round(e.width*n),p=Math.round(e.height*n);r.id=`card-${e.id}`,r.href=e.path_full,r.dataset.id=e.id,r.style.aspectRatio=`${i} / ${p}`;const y=await this._createBlurHash(e,i,p);y.className="d-block w-100 h-100 m-0 blurhash",r.querySelector(".photo-blurhash").replaceWith(y);const w=r.querySelector(".photo-thumb");return w.src=e.path_thumb,w.onload=()=>{w.classList.remove("opacity-0"),y.classList.add("opacity-0"),setTimeout(()=>y.remove(),1e3)},r},separator(e){const r=document.querySelector("#grid-separator").content.firstElementChild.cloneNode(!0);return r.textContent=e,r},async _createBlurHash(e,t=250,r=250){let n=e.blurhash;return n=typeof n=="string"&&n.length>=6?n:"LFRf8~-;?.OF?Hf8ShkB%vWrIEs9",await ft.getImageDataAsImageWithOnloadPromise(ft.decode(n,t,r),t,r)}};export{Tt as G,Ot as M,At as P,zt as a};
