import{A as n}from"./AppRequest-D0B9dxYA.js";document.addEventListener("DOMContentLoaded",()=>{let r;const l=document.getElementById("scanButton");l.addEventListener("click",async e=>{e.preventDefault();try{l.disabled=!0;const t=await n.request(route("api.jobs.dispatch"),"POST",{type:"TraverseFolderJob"})}catch(t){console.log(t)}});const c=document.getElementById("createForm");c.addEventListener("submit",async e=>{e.preventDefault();try{const t=new FormData(c),s=Object.fromEntries(t.entries()),o=await n.request(c.action,"POST",s);d(document.getElementById("createFormMessage"),o.message,!0),setTimeout(()=>{window.location.href=window.location.href},1e3)}catch(t){const s=t?.response?.message||t?.message||"An unknown error occurred.";d(document.getElementById("createFormMessage"),s,!1)}}),document.querySelectorAll('button[data-bs-target="#offcanvas-modify-user"]').forEach(e=>{e.addEventListener("click",async function(){const t=this.getAttribute("data-user-id");try{const o=(await n.request(`/api/users/${t}`,"GET")).data;document.getElementById("modifyUserId").value=o.id,document.getElementById("modifyUserName").value=o.name,document.getElementById("modifyUserEmail").value=o.email,document.getElementById("modifyUserRole").value=o.role;const m=document.getElementById("offcanvas-modify-user");bootstrap.Offcanvas.getOrCreateInstance(m).show()}catch(s){alert("Failed to load user data: "+s.message)}})}),document.getElementById("modifyForm").addEventListener("submit",async function(e){e.preventDefault();const t=document.getElementById("modifyUserId").value,s=this,o=`/api/users/${t}`,m={name:s.name.value,email:s.email.value,role:s.role.value};document.getElementById("modifyFormMessage");try{const a=await n.request(o,"PUT",m);location.reload()}catch(a){const u=a?.response?.message||a?.message||"An unknown error occurred.";d(document.getElementById("modifyFormMessage"),u,!1)}});function d(e,t,s=!0){e.classList.add("visible"),e.classList.toggle("alert-success",s),e.classList.toggle("alert-warning",!s),e.textContent=t,r&&clearTimeout(r),r=setTimeout(()=>{e.classList.remove("visible")},3e3)}});
