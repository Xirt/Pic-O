import{A as vt,f as gt}from"./domHelpers-Da9rvIEx.js";var S=function(){return S=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},S.apply(this,arguments)};typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(t,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),n}));var yt=typeof document<"u"&&!!document.documentMode,at;function wt(){return at||(at=document.createElement("div").style)}var ht=["webkit","moz","ms"],Z={};function ut(e){if(Z[e])return Z[e];var t=wt();if(e in t)return Z[e]=e;for(var r=e[0].toUpperCase()+e.slice(1),n=ht.length;n--;){var i="".concat(ht[n]).concat(r);if(i in t)return Z[e]=i}}function Q(e,t){return parseFloat(t[ut(e)])||0}function J(e,t,r){r===void 0&&(r=window.getComputedStyle(e));var n=t==="border"?"Width":"";return{left:Q("".concat(t,"Left").concat(n),r),right:Q("".concat(t,"Right").concat(n),r),top:Q("".concat(t,"Top").concat(n),r),bottom:Q("".concat(t,"Bottom").concat(n),r)}}function k(e,t,r){e.style[ut(t)]=r}function bt(e,t){var r=ut("transform");k(e,"transition","".concat(r," ").concat(t.duration,"ms ").concat(t.easing))}function xt(e,t,r){var n=t.x,i=t.y,f=t.scale,y=t.isSVG;if(k(e,"transform","scale(".concat(f,") translate(").concat(n,"px, ").concat(i,"px)")),y&&yt){var v=window.getComputedStyle(e).getPropertyValue("transform");e.setAttribute("transform",v)}}function ot(e){var t=e.parentNode,r=window.getComputedStyle(e),n=window.getComputedStyle(t),i=e.getBoundingClientRect(),f=t.getBoundingClientRect();return{elem:{style:r,width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right,margin:J(e,"margin",r),border:J(e,"border",r)},parent:{style:n,width:f.width,height:f.height,top:f.top,bottom:f.bottom,left:f.left,right:f.right,padding:J(t,"padding",n),border:J(t,"border",n)}}}var j={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};typeof window<"u"&&(typeof window.PointerEvent=="function"?j={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(j={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));function st(e,t,r,n){j[e].split(" ").forEach(function(i){t.addEventListener(i,r,n)})}function it(e,t,r){j[e].split(" ").forEach(function(n){t.removeEventListener(n,r)})}function mt(e,t){for(var r=e.length;r--;)if(e[r].pointerId===t.pointerId)return r;return-1}function lt(e,t){var r;if(t.touches){r=0;for(var n=0,i=t.touches;n<i.length;n++){var f=i[n];f.pointerId=r++,lt(e,f)}return}r=mt(e,t),r>-1&&e.splice(r,1),e.push(t)}function Ct(e,t){if(t.touches){for(;e.length;)e.pop();return}var r=mt(e,t);r>-1&&e.splice(r,1)}function dt(e){e=e.slice(0);for(var t=e.pop(),r;r=e.pop();)t={clientX:(r.clientX-t.clientX)/2+t.clientX,clientY:(r.clientY-t.clientY)/2+t.clientY};return t}function ct(e){if(e.length<2)return 0;var t=e[0],r=e[1];return Math.sqrt(Math.pow(Math.abs(r.clientX-t.clientX),2)+Math.pow(Math.abs(r.clientY-t.clientY),2))}function Mt(e){for(var t=e;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function Et(e){return(e.getAttribute("class")||"").trim()}function Pt(e,t){return e.nodeType===1&&" ".concat(Et(e)," ").indexOf(" ".concat(t," "))>-1}function St(e,t){for(var r=e;r!=null;r=r.parentNode)if(Pt(r,t.excludeClass)||t.exclude.indexOf(r)>-1)return!0;return!1}var qt=/^http:[\w\.\/]+svg$/;function It(e){return qt.test(e.namespaceURI)&&e.nodeName.toLowerCase()!=="svg"}function At(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var pt={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(e){e.preventDefault(),e.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:xt,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function Ot(e,t){if(!e)throw new Error("Panzoom requires an element as an argument");if(e.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!Mt(e))throw new Error("Panzoom should be called on elements that have been attached to the DOM");t=S(S({},pt),t);var r=It(e),n=e.parentNode;n.style.overflow=t.overflow,n.style.userSelect="none",n.style.touchAction=t.touchAction,(t.canvas?n:e).style.cursor=t.cursor,e.style.userSelect="none",e.style.touchAction=t.touchAction,k(e,"transformOrigin",typeof t.origin=="string"?t.origin:r?"0 0":"50% 50%");function i(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",e.style.cursor="",e.style.userSelect="",e.style.touchAction="",k(e,"transformOrigin","")}function f(a){a===void 0&&(a={});for(var l in a)a.hasOwnProperty(l)&&(t[l]=a[l]);(a.hasOwnProperty("cursor")||a.hasOwnProperty("canvas"))&&(n.style.cursor=e.style.cursor="",(t.canvas?n:e).style.cursor=t.cursor),a.hasOwnProperty("overflow")&&(n.style.overflow=a.overflow),a.hasOwnProperty("touchAction")&&(n.style.touchAction=a.touchAction,e.style.touchAction=a.touchAction)}var y=0,v=0,b=1,X=!1;o(t.startScale,{animate:!1,force:!0}),setTimeout(function(){_(t.startX,t.startY,{animate:!1,force:!0})});function Y(a,l,d){if(!d.silent){var g=new CustomEvent(a,{detail:l});e.dispatchEvent(g)}}function U(a,l,d){var g={x:y,y:v,scale:b,isSVG:r,originalEvent:d};return requestAnimationFrame(function(){typeof l.animate=="boolean"&&(l.animate?bt(e,l):k(e,"transition","none")),l.setTransform(e,g,l),Y(a,g,l),Y("panzoomchange",g,l)}),g}function F(a,l,d,g){var c=S(S({},t),g),w={x:y,y:v,opts:c};if(!c.force&&(c.disablePan||c.panOnlyWhenZoomed&&b===c.startScale))return w;if(a=parseFloat(a),l=parseFloat(l),c.disableXAxis||(w.x=(c.relative?y:0)+a),c.disableYAxis||(w.y=(c.relative?v:0)+l),c.contain){var m=ot(e),B=m.elem.width/b,N=m.elem.height/b,$=B*d,V=N*d,L=($-B)/2,R=(V-N)/2;if(c.contain==="inside"){var tt=(-m.elem.margin.left-m.parent.padding.left+L)/d,et=(m.parent.width-$-m.parent.padding.left-m.elem.margin.left-m.parent.border.left-m.parent.border.right+L)/d;w.x=Math.max(Math.min(w.x,et),tt);var rt=(-m.elem.margin.top-m.parent.padding.top+R)/d,nt=(m.parent.height-V-m.parent.padding.top-m.elem.margin.top-m.parent.border.top-m.parent.border.bottom+R)/d;w.y=Math.max(Math.min(w.y,nt),rt)}else if(c.contain==="outside"){var tt=(-($-m.parent.width)-m.parent.padding.left-m.parent.border.left-m.parent.border.right+L)/d,et=(L-m.parent.padding.left)/d;w.x=Math.max(Math.min(w.x,et),tt);var rt=(-(V-m.parent.height)-m.parent.padding.top-m.parent.border.top-m.parent.border.bottom+R)/d,nt=(R-m.parent.padding.top)/d;w.y=Math.max(Math.min(w.y,nt),rt)}}return c.roundPixels&&(w.x=Math.round(w.x),w.y=Math.round(w.y)),w}function G(a,l){var d=S(S({},t),l),g={scale:b,opts:d};if(!d.force&&d.disableZoom)return g;var c=t.minScale,w=t.maxScale;if(d.contain){var m=ot(e),B=m.elem.width/b,N=m.elem.height/b;if(B>1&&N>1){var $=m.parent.width-m.parent.border.left-m.parent.border.right,V=m.parent.height-m.parent.border.top-m.parent.border.bottom,L=$/B,R=V/N;t.contain==="inside"?w=Math.min(w,L,R):t.contain==="outside"&&(c=Math.max(c,L,R))}}return g.scale=Math.min(Math.max(a,c),w),g}function _(a,l,d,g){var c=F(a,l,b,d);return y!==c.x||v!==c.y?(y=c.x,v=c.y,U("panzoompan",c.opts,g)):{x:y,y:v,scale:b,isSVG:r,originalEvent:g}}function o(a,l,d){var g=G(a,l),c=g.opts;if(!(!c.force&&c.disableZoom)){a=g.scale;var w=y,m=v;if(c.focal){var B=c.focal;w=(B.x/a-B.x/b+y*a)/a,m=(B.y/a-B.y/b+v*a)/a}var N=F(w,m,a,{relative:!1,force:!0});return y=N.x,v=N.y,b=a,U("panzoomzoom",c,d)}}function s(a,l){var d=S(S(S({},t),{animate:!0}),l);return o(b*Math.exp((a?1:-1)*d.step),d)}function u(a){return s(!0,a)}function h(a){return s(!1,a)}function p(a,l,d,g){var c=ot(e),w={width:c.parent.width-c.parent.padding.left-c.parent.padding.right-c.parent.border.left-c.parent.border.right,height:c.parent.height-c.parent.padding.top-c.parent.padding.bottom-c.parent.border.top-c.parent.border.bottom},m=l.clientX-c.parent.left-c.parent.padding.left-c.parent.border.left-c.elem.margin.left,B=l.clientY-c.parent.top-c.parent.padding.top-c.parent.border.top-c.elem.margin.top;r||(m-=c.elem.width/b/2,B-=c.elem.height/b/2);var N={x:m/w.width*(w.width*a),y:B/w.height*(w.height*a)};return o(a,S(S({},d),{animate:!1,focal:N}),g)}function q(a,l){a.preventDefault();var d=S(S(S({},t),l),{animate:!1}),g=a.deltaY===0&&a.deltaX?a.deltaX:a.deltaY,c=g<0?1:-1,w=G(b*Math.exp(c*d.step/3),d).scale;return p(w,a,d,a)}function P(a){var l=S(S(S({},t),{animate:!0,force:!0}),a);b=G(l.startScale,l).scale;var d=F(l.startX,l.startY,b,l);return y=d.x,v=d.y,U("panzoomreset",l)}var O,A,I,M,E,x,C=[];function T(a){if(!St(a.target,t)){lt(C,a),X=!0,t.handleStartEvent(a),O=y,A=v,Y("panzoomstart",{x:y,y:v,scale:b,isSVG:r,originalEvent:a},t);var l=dt(C);I=l.clientX,M=l.clientY,E=b,x=ct(C)}}function z(a){if(!(!X||O===void 0||A===void 0||I===void 0||M===void 0)){lt(C,a);var l=dt(C),d=C.length>1,g=b;if(d){x===0&&(x=ct(C));var c=ct(C)-x;g=G(c*t.step/80+E).scale,p(g,l,{animate:!1},a)}(!d||t.pinchAndPan)&&_(O+(l.clientX-I)/g,A+(l.clientY-M)/g,{animate:!1},a)}}function D(a){C.length===1&&Y("panzoomend",{x:y,y:v,scale:b,isSVG:r,originalEvent:a},t),Ct(C,a),X&&(X=!1,O=A=I=M=void 0)}var W=!1;function H(){W||(W=!0,st("down",t.canvas?n:e,T),st("move",document,z,{passive:!0}),st("up",document,D,{passive:!0}))}function K(){W=!1,it("down",t.canvas?n:e,T),it("move",document,z),it("up",document,D)}return t.noBind||H(),{bind:H,destroy:K,eventNames:j,getPan:function(){return{x:y,y:v}},getScale:function(){return b},getOptions:function(){return At(t)},handleDown:T,handleMove:z,handleUp:D,pan:_,reset:P,resetStyle:i,setOptions:f,setStyle:function(a,l){return k(e,a,l)},zoom:o,zoomIn:u,zoomOut:h,zoomToPoint:p,zoomWithWheel:q}}Ot.defaultOptions=pt;class Bt{constructor(t){this.sleep=r=>new Promise(n=>setTimeout(n,r)),this.container=t,this.emptyBoxTime=null,this.processing=!1,this.queue=[],this.items=[],this.breakpoints=this.parseDataCols(this.container.dataset.cols||""),this.currentColCount=0,this.setupColumns(),window.addEventListener("resize",()=>this.refreshColumns())}parseDataCols(t){const r={sm:null,md:null,lg:null,xl:null};t.split(" ").forEach(i=>{const[f,y]=i.split(":");f&&y&&(r[f]=parseInt(y))});const n=["sm","md","lg","xl"];for(let i=0;i<n.length;i++)r[n[i]]===null&&(r[n[i]]=i>0?r[n[i-1]]:1);return r}getColumnCount(){const t=window.innerWidth;switch(!0){case t>=1200:return this.breakpoints.xl;case t>=992:return this.breakpoints.lg;case t>=768:return this.breakpoints.md}return this.breakpoints.sm}setupColumns(){this.container.querySelectorAll(".flow").forEach(n=>n.remove()),this.currentColCount=this.getColumnCount();const t=(100/this.currentColCount).toFixed(6)+"%",r=document.createDocumentFragment();for(let n=0;n<this.currentColCount;n++){const i=document.createElement("div");i.className="col flow p-1",i.style.width=t,r.appendChild(i)}this.container.prepend(r)}refreshColumns(t=!1){const r=this.getColumnCount();if(t||r!==this.currentColCount){const n=[...this.items];this.clear(),this.setupColumns(),n.forEach(i=>this.addItem(i))}this.toggleMessageBox()}queueItem(t){this.queue.push(t),this.processQueue()}async processQueue(){if(!this.processing){for(this.processing=!0;this.queue.length>0;){const t=this.queue.shift();this.addItem(t),await this.sleep(100)}this.container.dispatchEvent(new CustomEvent("grid.complete",{})),this.processing=!1}}addItem(t){this.getShortestColumn().appendChild(t),this.items.push(t),this.container.dispatchEvent(new CustomEvent("grid.refresh",{detail:this.items})),requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.classList.add("show")})}),this.toggleMessageBox()}removeItem(t){t.classList.remove("show"),setTimeout(()=>{t.parentElement&&t.parentElement.removeChild(t),this.items=this.items.filter(r=>r!==t),this.refreshColumns(!0)},300)}getShortestColumn(){return Array.from(this.container.querySelectorAll(".flow")).reduce((r,n)=>n.scrollHeight<r.scrollHeight?n:r)}clear(){this.items=[],this.queue=[],this.container.querySelectorAll(".flow").forEach(r=>r.innerHTML=""),this.toggleMessageBox()}toggleMessageBox(){const t=this.container.querySelector(".empty-grid");t&&(this.items.length===0&&!this.emptyBoxTimer?(t.classList.remove("d-none"),this.emptyBoxTimer=setTimeout(()=>{t.classList.add("show")},400)):this.items.length!==0&&(t.classList.remove("show"),t.offsetHeight,t.classList.add("d-none"),clearTimeout(this.emptyBoxTimer),this.emptyBoxTimer=null))}}const ft=(function(e){const t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],r=o=>{let s=0;for(let u=0;u<o.length;u++){const h=o[u],p=t.indexOf(h);s=s*83+p}return s},n=(o,s)=>{var u="";for(let h=1;h<=s;h++){let p=Math.floor(o)/Math.pow(83,s-h)%83;u+=t[Math.floor(p)]}return u},i=o=>{let s=o/255;return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)},f=o=>{let s=Math.max(0,Math.min(1,o));return s<=.0031308?Math.round(s*12.92*255+.5):Math.round((1.055*Math.pow(s,.4166666666666667)-.055)*255+.5)},y=o=>o<0?-1:1,v=(o,s)=>y(o)*Math.pow(Math.abs(o),s),b=o=>{if(!o||o.length<6)throw new Error("The blurhash string must be at least 6 characters");const s=r(o[0]),u=Math.floor(s/9)+1,h=s%9+1;if(o.length!==4+2*h*u)throw new Error(`blurhash length mismatch: length is ${o.length} but it should be ${4+2*h*u}`)},X=o=>{const s=o>>16,u=o>>8&255,h=o&255;return[i(s),i(u),i(h)]},Y=(o,s)=>{const u=Math.floor(o/361),h=Math.floor(o/19)%19,p=o%19;return[v((u-9)/9,2)*s,v((h-9)/9,2)*s,v((p-9)/9,2)*s]},F=(o,s,u,h)=>{let p=0,q=0,P=0;const O=s*4;for(let I=0;I<s;I++)for(let M=0;M<u;M++){const E=h(I,M);p+=E*i(o[4*I+0+M*O]),q+=E*i(o[4*I+1+M*O]),P+=E*i(o[4*I+2+M*O])}let A=1/(s*u);return[p*A,q*A,P*A]},G=o=>{const s=f(o[0]),u=f(o[1]),h=f(o[2]);return(s<<16)+(u<<8)+h},_=(o,s)=>{let u=Math.floor(Math.max(0,Math.min(18,Math.floor(v(o[0]/s,.5)*9+9.5)))),h=Math.floor(Math.max(0,Math.min(18,Math.floor(v(o[1]/s,.5)*9+9.5)))),p=Math.floor(Math.max(0,Math.min(18,Math.floor(v(o[2]/s,.5)*9+9.5))));return u*19*19+h*19+p};return e.decodePromise=(o,s,u,h=1)=>new Promise((p,q)=>{p(e.decode(o,s,u,h))}),e.decode=(o,s,u,h=1)=>{b(o),h=h|1;const p=r(o[0]),q=Math.floor(p/9)+1,P=p%9+1,A=(r(o[1])+1)/166,I=new Array(P*q);for(let x=0;x<I.length;x++)if(x===0){const C=r(o.substring(2,6));I[x]=X(C)}else{const C=r(o.substring(4+x*2,6+x*2));I[x]=Y(C,A*h)}const M=s*4,E=new Uint8ClampedArray(M*u);for(let x=0;x<u;x++)for(let C=0;C<s;C++){let T=0,z=0,D=0;for(let a=0;a<q;a++)for(let l=0;l<P;l++){const d=Math.cos(Math.PI*C*l/s)*Math.cos(Math.PI*x*a/u);let g=I[l+a*P];T+=g[0]*d,z+=g[1]*d,D+=g[2]*d}let W=f(T),H=f(z),K=f(D);E[4*C+0+x*M]=W,E[4*C+1+x*M]=H,E[4*C+2+x*M]=K,E[4*C+3+x*M]=255}return E},e.encodePromise=(o,s,u,h,p)=>new Promise((q,P)=>{q(e.encode(o,s,u,h,p))}),e.encode=(o,s,u,h,p)=>{if(h<1||h>9||p<1||p>9)throw new Error("BlurHash must have between 1 and 9 components");if(s*u*4!==o.length)throw new Error("Width and height must match the pixels array");let q=[];for(let E=0;E<p;E++)for(let x=0;x<h;x++){const C=x==0&&E==0?1:2,T=F(o,s,u,(z,D)=>C*Math.cos(Math.PI*x*z/s)*Math.cos(Math.PI*E*D/u));q.push(T)}const P=q[0],O=q.slice(1);let A="",I=h-1+(p-1)*9;A+=n(I,1);let M;if(O.length>0){let E=Math.max(...O.map(C=>Math.max(...C))),x=Math.floor(Math.max(0,Math.min(82,Math.floor(E*166-.5))));M=(x+1)/166,A+=n(x,1)}else M=1,A+=n(0,1);return A+=n(G(P),4),O.forEach(E=>{A+=n(_(E,M),2)}),A},e.getImageData=o=>{const s=o.width,u=o.height,h=document.createElement("canvas"),p=h.getContext("2d");return h.width=s,h.height=u,p.width=s,p.height=u,p.drawImage(o,0,0),p.getImageData(0,0,s,u).data},e.drawImageDataOnNewCanvas=(o,s,u)=>{const h=document.createElement("canvas"),p=h.getContext("2d");return h.width=s,h.height=u,p.width=s,p.height=u,p.putImageData(new ImageData(o,s,u),0,0),h},e.getImageDataAsImageWithOnloadPromise=(o,s,u)=>new Promise((h,p)=>{e.getImageDataAsImage(o,s,u,(q,P)=>{h(P)})}),e.getImageDataAsImage=(o,s,u,h)=>{const q=e.drawImageDataOnNewCanvas(o,s,u).toDataURL(),P=new Image(s,u);return P.onload=O=>h(O,P),P.width=s,P.height=u,P.src=q,P},e})({});class Tt{constructor(t,r="grid"){this.sleep=n=>new Promise(i=>setTimeout(i,n)),this.container=typeof r=="string"?document.getElementById(r):r,this.manager=t,this.rendering=!1,this.observer=!0,this.items=[],this.masonry=new Bt(this.container),this.container.addEventListener("grid.complete",()=>{this.observer&&this.setupObserver()})}add(t){const r=Array.isArray(t)?t:[t];r.forEach(n=>{this._append(n)}),this.items=this.items.concat(r)}async render(){if(!this.rendering){for(this.rendering=!0;this.items.length;)this._append(this.items.shift());this.rendering=!1}}_append(t){this.masonry.queueItem(t),this.container.dispatchEvent(new CustomEvent("grid.queued_item",{detail:{item:t}}))}remove(t){this.masonry.removeItem(t)}clear(){this.masonry.clear(),this.items=[]}setupObserver(){const t=this.container.querySelectorAll(".grid-item");if(!t.length)return;new IntersectionObserver(async(n,i)=>{for(const f of n)f.isIntersecting&&!vt.isLoading()&&(i.disconnect(),await this.manager.showMore())},{rootMargin:"200px"}).observe(t[t.length-1])}}const zt={folder(e){const r=document.querySelector("#card-folder").content.firstElementChild.cloneNode(!0),n=r.querySelector(".folder-thumb");n.src=`folders/${e.id}/thumbnail`;const i=r.querySelector(".folder-name");return i.textContent=e.name,i.title=e.name,r},file(e){const r=document.querySelector("#card-file").content.firstElementChild.cloneNode(!0);r.href=e.path_full,r.dataset.id=e.id;const n=r.querySelector(".file-body");n.style.backgroundImage=`url(${e.path_thumb})`,n.style.backgroundSize="cover";const i=r.querySelector(".file-name");return i.textContent=e.filename,i.title=e.filename,r},async album(e){const r=document.querySelector("#card-album").content.firstElementChild.cloneNode(!0);if(r.href=route("albums.show",{id:e.id}),r.dataset.id=e.id,e.cover){const f=await this._createBlurHash(e.cover);f.className="d-block position-absolute object-fit-cover w-100 h-100",r.querySelector(".album-blurhash").replaceWith(f);const v=r.querySelector(".album-thumb");v.src=`photos/${e.cover.id}/thumbnail`}else r.querySelector(".album-blurhash").remove(),r.querySelector(".album-thumb").remove();const n=r.querySelector(".album-photo-count");n.textContent=e.photos;const i=r.querySelector(".album-title");return i.textContent=e.display_name,r},async photo(e){const r=document.querySelector("#card-photo").content.firstElementChild.cloneNode(!0),n=Math.min(250/e.width,1),i=Math.round(e.width*n),f=Math.round(e.height*n);r.id=`card-${e.id}`,r.href=e.path_full,r.dataset.id=e.id,r.style.aspectRatio=`${i} / ${f}`;const y=await this._createBlurHash(e,i,f);y.className="d-block w-100 h-100 m-0 blurhash",r.querySelector(".photo-blurhash").replaceWith(y);const b=r.querySelector(".photo-thumb");return b.src=e.path_thumb,b.onload=()=>{b.classList.remove("opacity-0"),y.classList.add("opacity-0"),setTimeout(()=>y.remove(),1e3)},r},async album2(e){const t=document.createElement("a");if(t.className="grid-item card clickable selectable position-relative rounded-0 ratio ratio-4x3 w-100 p-0 my-1 border-0",t.href=route("albums.show",{id:e.id}),t.setAttribute("data-id",e.id),e.cover){const y=await this._createBlurHash(e.cover);y.className="d-block position-absolute object-fit-cover w-100 h-100",t.appendChild(y);const v=document.createElement("img");v.className="d-block object-fit-cover",v.src=`photos/${e.cover.id}/thumbnail`,v.loading="lazy",t.appendChild(v)}const r=gt("check-circle-fill","opacity-75 h-auto w-auto position-absolute top-50 start-50 translate-middle");t.appendChild(r);const n=document.createElement("div");n.className="card-img-overlay bottom badge rounded-pill bg-secondary text-light fw-bold px-2 py-1 m-1 me-2",n.textContent=e.photos,t.appendChild(n);const i=document.createElement("div");i.className="card-img-overlay top rounded-0 bg-dark text-light fw-semibold text-truncate p-2",i.textContent=e.display_name,t.appendChild(i);const f=document.createElement("div");return f.className="d-block quick-actions p-1 pe-2",t.appendChild(f),f.appendChild(this.createModifyButton(t)),f.appendChild(this.createDeleteButton(t)),t},separator(e){const r=document.querySelector("#grid-separator").content.firstElementChild.cloneNode(!0);return r.textContent=e,r},async _createBlurHash(e,t=250,r=250){let n=e.blurhash;return n=typeof n=="string"&&n.length>=6?n:"LFRf8~-;?.OF?Hf8ShkB%vWrIEs9",await ft.getImageDataAsImageWithOnloadPromise(ft.decode(n,t,r),t,r)}};export{Tt as G,Bt as M,Ot as P,zt as a};
