import{A as c}from"./AppRequest-D0B9dxYA.js";document.addEventListener("DOMContentLoaded",()=>{let r;const n=document.getElementById("createForm");n.addEventListener("submit",async t=>{t.preventDefault();try{const s=new FormData(n),e=Object.fromEntries(s.entries()),a=await c.request(n.action,"POST",e);m(document.getElementById("createFormMessage"),a.message,!0),setTimeout(()=>{window.location.href=window.location.href},1e3)}catch(s){const e=s?.response?.message||s?.message||"An unknown error occurred.";m(document.getElementById("createFormMessage"),e,!1)}}),document.querySelectorAll('button[data-bs-target="#offcanvas-modify-user"]').forEach(t=>{t.addEventListener("click",async function(){const s=this.getAttribute("data-user-id");try{const a=(await c.request(`/api/users/${s}`,"GET")).data;document.getElementById("modifyUserId").value=a.id,document.getElementById("modifyUserName").value=a.name,document.getElementById("modifyUserEmail").value=a.email,document.getElementById("modifyUserRole").value=a.role;const d=document.getElementById("offcanvas-modify-user");bootstrap.Offcanvas.getOrCreateInstance(d).show()}catch(e){alert("Failed to load user data: "+e.message)}})}),document.getElementById("modifyForm").addEventListener("submit",async function(t){t.preventDefault();const s=document.getElementById("modifyUserId").value,e=this,a=`/api/users/${s}`,d={name:e.name.value,email:e.email.value,role:e.role.value};document.getElementById("modifyFormMessage");try{const o=await c.request(a,"PUT",d);location.reload()}catch(o){const l=o?.response?.message||o?.message||"An unknown error occurred.";m(document.getElementById("modifyFormMessage"),l,!1)}});function m(t,s,e=!0){t.classList.add("visible"),t.classList.toggle("alert-success",e),t.classList.toggle("alert-warning",!e),t.textContent=s,r&&clearTimeout(r),r=setTimeout(()=>{t.classList.remove("visible")},3e3)}});
