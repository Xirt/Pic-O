[supervisord]
nodaemon=true
stopasgroup=true
killasgroup=true

[program:php-fpm]
command=docker-php-entrypoint php-fpm
stopsignal=QUIT
stopwaitsecs=10
autostart=true
autorestart=true
priority=5

[program:nginx]
command=nginx -g "daemon off;"
stopsignal=QUIT
stopwaitsecs=10
autostart=true
autorestart=true
priority=10

[program:laravel-worker-folders]
command=php artisan queue:work --queue=folders --sleep=1 --tries=3 --timeout=600
directory=/var/www
autostart=true
autorestart=true
numprocs=2
process_name=%(program_name)s_%(process_num)02d
priority=15

[program:laravel-worker-photos]
command=php artisan queue:work --queue=photos --sleep=5 --tries=3 --timeout=30
directory=/var/www
autostart=true
autorestart=true
numprocs=4
process_name=%(program_name)s_%(process_num)02d
priority=15
